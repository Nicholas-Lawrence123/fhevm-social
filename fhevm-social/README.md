# FHEVM Social - é“¾ä¸Šæœ‹å‹åœˆ DApp

åŸºäº FHEVM (Fully Homomorphic Encryption Virtual Machine) æ„å»ºçš„åŠ å¯†æœ‹å‹åœˆåº”ç”¨ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ”“ å…¬å¼€åŠ¨æ€
- æ‰€æœ‰äººéƒ½èƒ½ç›´æ¥æŸ¥çœ‹å†…å®¹
- æ˜æ–‡å­˜å‚¨åœ¨åŒºå—é“¾ä¸Š

### ğŸ”’ ç§å¯†åŠ¨æ€
- å†…å®¹ä½¿ç”¨ FHEVM åŠ å¯†å­˜å‚¨
- åªæœ‰å‘å¸ƒè€…æœ¬äººèƒ½å¤Ÿè§£å¯†æŸ¥çœ‹
- å…¶ä»–ç”¨æˆ·çœ‹åˆ°çš„æ˜¯åŠ å¯†çŠ¶æ€

### ğŸ¨ ç¾è§‚ç•Œé¢
- ç°ä»£åŒ–çš„ UI è®¾è®¡
- å“åº”å¼å¸ƒå±€
- æ·±è‰²æ¨¡å¼æ”¯æŒ
- æµç•…çš„ç”¨æˆ·ä½“éªŒ

## æŠ€æœ¯æ¶æ„

### æ™ºèƒ½åˆçº¦ (FHEVM)
- **FhevmSocial.sol**: æœ‹å‹åœˆæ ¸å¿ƒåˆçº¦
- æ”¯æŒå…¬å¼€å’Œç§å¯†åŠ¨æ€å‘å¸ƒ
- åŸºäº FHEVM çš„åŠ å¯†åŠŸèƒ½
- ACL è®¿é—®æ§åˆ¶

### å‰ç«¯åº”ç”¨ (Next.js + TypeScript)
- **React 19** + **Next.js 15**
- **Tailwind CSS** æ ·å¼
- **FHEVM SDK** é›†æˆ
- **ethers.js** åŒºå—é“¾äº¤äº’

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- Hardhat æœ¬åœ°èŠ‚ç‚¹
- MetaMask é’±åŒ…

### å®‰è£…ä¾èµ–
```bash
npm install --cache /tmp/npm-cache
```

### å¯åŠ¨æœ¬åœ° Hardhat èŠ‚ç‚¹
```bash
cd ../fhevm-hardhat-template
npx hardhat node
```

### éƒ¨ç½²åˆçº¦
```bash
cd ../fhevm-hardhat-template
npx hardhat deploy --network localhost
```

### å¯åŠ¨å‰ç«¯åº”ç”¨
```bash
cd ../fhevm-social
npm run dev
```

### ä¸€é”®å¯åŠ¨è„šæœ¬
```bash
cd fhevm-social
./scripts/start-dev.sh
```

### ä½¿ç”¨ Mock æ¨¡å¼ (å¼€å‘ç¯å¢ƒ)
```bash
# ç¡®ä¿ Hardhat èŠ‚ç‚¹è¿è¡Œ
npm run dev:mock
```

Mock æ¨¡å¼ä¼šè‡ªåŠ¨æ£€æµ‹æœ¬åœ° Hardhat èŠ‚ç‚¹å¹¶ä½¿ç”¨ FHEVM Mock Utils è¿›è¡Œæ¨¡æ‹Ÿï¼Œé€‚åˆå¿«é€Ÿå¼€å‘å’Œæµ‹è¯•ã€‚

### ç½‘ç»œæ”¯æŒ
- **æœ¬åœ°å¼€å‘**: Hardhat ç½‘ç»œ (chainId: 31337)
- **æµ‹è¯•ç½‘**: Sepolia ç½‘ç»œ (chainId: 11155111)
- **Mockæ¨¡å¼**: æœ¬åœ°HardhatèŠ‚ç‚¹æ¨¡æ‹ŸFHEVM

### å¼€å‘æ¨¡å¼è¯´æ˜
- `npm run dev` - æ ‡å‡†å¼€å‘æ¨¡å¼ï¼ˆæ”¯æŒSepoliaæµ‹è¯•ç½‘ï¼‰
- `npm run dev:mock` - Mock æ¨¡å¼ï¼ˆä½¿ç”¨æœ¬åœ° Hardhat èŠ‚ç‚¹æ¨¡æ‹Ÿ FHEVMï¼‰

### Sepolia æµ‹è¯•ç½‘ä½¿ç”¨
1. åœ¨ MetaMask ä¸­æ·»åŠ  Sepolia ç½‘ç»œ
2. ç¡®ä¿æœ‰ Sepolia ETH (ä» [Sepolia Faucet](https://sepoliafaucet.com/) è·å–)
3. åœ¨åº”ç”¨ä¸­åˆ‡æ¢åˆ° Sepolia ç½‘ç»œ
4. å¼€å§‹å‘å¸ƒå’ŒæŸ¥çœ‹åŠ¨æ€ï¼

## é™æ€éƒ¨ç½²

åº”ç”¨å·²é…ç½®ä¸ºæ”¯æŒé™æ€å¯¼å‡ºï¼Œå¯ä»¥éƒ¨ç½²åˆ°ä»»ä½•é™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼š

### æ„å»ºé™æ€æ–‡ä»¶
```bash
npm run build  # ç”Ÿæˆ out/ ç›®å½•
```

### æœ¬åœ°é¢„è§ˆ
```bash
./preview-static.sh
```

### éƒ¨ç½²å¹³å°
- **Vercel**: ç›´æ¥æ‹–æ‹½ `out/` æ–‡ä»¶å¤¹
- **Netlify**: æ‹–æ‹½ `out/` æ–‡ä»¶å¤¹æˆ–ä½¿ç”¨ CLI
- **GitHub Pages**: ä½¿ç”¨ `gh-pages` åŒ…
- **å…¶ä»–**: AWS S3, Firebase, Surge ç­‰

### éƒ¨ç½²æ³¨æ„äº‹é¡¹
âš ï¸ **é‡è¦**: åŒºå—é“¾åº”ç”¨éƒ¨ç½²åˆ°é™æ€ä¸»æœºæœ‰ä»¥ä¸‹é™åˆ¶ï¼š
- éœ€è¦ HTTPS è¿æ¥ (MetaMask è¦æ±‚)
- å¯èƒ½é‡åˆ° CORS é™åˆ¶
- å»ºè®®ä½¿ç”¨æ”¯æŒè‡ªå®šä¹‰åŸŸåçš„ä¸“ä¸šæ‰˜ç®¡æœåŠ¡

## é¡¹ç›®ç»“æ„

```
fhevm-social/
â”œâ”€â”€ abi/                    # åˆçº¦ ABI æ–‡ä»¶
â”œâ”€â”€ app/                    # Next.js åº”ç”¨é¡µé¢
â”œâ”€â”€ components/             # React ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                # åŸºç¡€ UI ç»„ä»¶
â”‚   â”œâ”€â”€ FhevmSocialApp.tsx # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ CreatePostForm.tsx # å‘å¸ƒåŠ¨æ€è¡¨å•
â”‚   â”œâ”€â”€ PostCard.tsx       # åŠ¨æ€å¡ç‰‡ç»„ä»¶
â”‚   â””â”€â”€ ConnectionStatus.tsx # è¿æ¥çŠ¶æ€ç»„ä»¶
â”œâ”€â”€ fhevm/                 # FHEVM ç›¸å…³å·¥å…·
â”œâ”€â”€ hooks/                 # React Hooks
â”‚   â””â”€â”€ useFhevmSocial.tsx # æœ‹å‹åœˆä¸šåŠ¡é€»è¾‘
â””â”€â”€ lib/                   # å·¥å…·å‡½æ•°
```

## æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. åŠ¨æ€å‘å¸ƒæµç¨‹

#### å…¬å¼€åŠ¨æ€
1. ç”¨æˆ·è¾“å…¥å†…å®¹
2. è°ƒç”¨ `createPublicPost(string content)`
3. å†…å®¹æ˜æ–‡å­˜å‚¨åœ¨åŒºå—é“¾

#### ç§å¯†åŠ¨æ€
1. ç”¨æˆ·è¾“å…¥å†…å®¹
2. ä½¿ç”¨ `instance.createEncryptedInput()` åˆ›å»ºåŠ å¯†è¾“å…¥
3. è°ƒç”¨ `createPrivatePost(externalEuint256, bytes)`
4. å†…å®¹åŠ å¯†å­˜å‚¨ï¼Œåªæœ‰ä½œè€…æœ‰è§£å¯†æƒé™

### 2. åŠ¨æ€æŸ¥çœ‹æµç¨‹

#### å…¬å¼€åŠ¨æ€
- ç›´æ¥æ˜¾ç¤ºæ˜æ–‡å†…å®¹

#### ç§å¯†åŠ¨æ€
- æ˜¾ç¤ºåŠ å¯†çŠ¶æ€å’Œè§£å¯†æŒ‰é’®
- ç‚¹å‡»è§£å¯†åè°ƒç”¨ `instance.userDecrypt()`
- éªŒè¯ç­¾ååæ˜¾ç¤ºè§£å¯†å†…å®¹

### 3. FHEVM é›†æˆ

```typescript
// åˆ›å»ºåŠ å¯†è¾“å…¥
const input = instance.createEncryptedInput(contractAddress, userAddress);
input.add256(contentLength);
const encrypted = await input.encrypt();

// è§£å¯†å†…å®¹
const result = await instance.userDecrypt(
  [{ handle: encryptedHandle, contractAddress }],
  signatureData.privateKey,
  // ... å…¶ä»–å‚æ•°
);
```

## å®‰å…¨ç‰¹æ€§

- **ç«¯åˆ°ç«¯åŠ å¯†**: ç§å¯†åŠ¨æ€åœ¨å®¢æˆ·ç«¯åŠ å¯†
- **è®¿é—®æ§åˆ¶**: åªæœ‰ä½œè€…èƒ½è§£å¯†è‡ªå·±çš„ç§å¯†åŠ¨æ€
- **ç­¾åéªŒè¯**: æ‰€æœ‰è§£å¯†æ“ä½œéƒ½éœ€è¦æœ‰æ•ˆçš„ FHEVM ç­¾å
- **ç½‘ç»œéš”ç¦»**: ç§å¯†å†…å®¹ä¸ä¼šåœ¨ç½‘ç»œä¸­æ˜æ–‡ä¼ è¾“

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨åˆçº¦ä¸­å®ç°æ–°çš„åŠŸèƒ½å‡½æ•°
2. æ›´æ–° ABI æ–‡ä»¶
3. åœ¨ `useFhevmSocial` hook ä¸­æ·»åŠ ä¸šåŠ¡é€»è¾‘
4. åˆ›å»ºç›¸åº”çš„ UI ç»„ä»¶
5. é›†æˆåˆ°ä¸»åº”ç”¨ä¸­

### æµ‹è¯•æµç¨‹
1. å¯åŠ¨æœ¬åœ° Hardhat èŠ‚ç‚¹
2. éƒ¨ç½²åˆçº¦
3. å¯åŠ¨å‰ç«¯åº”ç”¨
4. ä½¿ç”¨ MetaMask è¿æ¥
5. æµ‹è¯•å‘å¸ƒå’ŒæŸ¥çœ‹åŠ¨æ€åŠŸèƒ½

## éƒ¨ç½²è¯´æ˜

### æœ¬åœ°å¼€å‘
ä½¿ç”¨ Mock æ¨¡å¼è¿›è¡Œå¿«é€Ÿå¼€å‘å’Œæµ‹è¯•ã€‚

### æµ‹è¯•ç½‘éƒ¨ç½²
1. é…ç½®ç½‘ç»œ (Sepolia)
2. æ›´æ–°åˆçº¦åœ°å€
3. éƒ¨ç½²åˆçº¦åˆ°æµ‹è¯•ç½‘
4. æ›´æ–°å‰ç«¯é…ç½®

### ä¸»ç½‘éƒ¨ç½²
1. å®¡è®¡åˆçº¦ä»£ç 
2. éƒ¨ç½²åˆ°ä¸»ç½‘
3. æ›´æ–°å‰ç«¯é…ç½®
4. è¿›è¡Œæœ€ç»ˆæµ‹è¯•

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. å‘èµ· Pull Request

## è®¸å¯è¯

BSD-3-Clause-Clear License

## è‡´è°¢

- [Zama](https://www.zama.ai/) - FHEVM æŠ€æœ¯æä¾›è€…
- [fhEVM](https://docs.zama.ai/fhevm) - å…¨åŒæ€åŠ å¯†è™šæ‹Ÿæœº
- [Next.js](https://nextjs.org/) - React æ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com/) - CSS æ¡†æ¶